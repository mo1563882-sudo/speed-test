<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فحص سرعة الإنترنت - تكنوفيا</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="results">
            <p>سرعة التحميل: <span id="download">-</span> Mbps</p>
            <p>زمن الاستجابة (Ping): <span id="ping">-</span> ms</p>
            <p>استقرار الشبكة (Jitter): <span id="jitter">-</span> ms</p>
        </div>
    <script>
        const startBtn = document.getElementById('start-btn');
        const speedDisplay = document.getElementById('speed-value');
        const downloadSpan = document.getElementById('download');

        // رابط ملف الفحص (مؤقت لحين ترفع ملفك)
        const imageAddr = "https://upload.wikimedia.org/wikipedia/commons/3/3d/LARGE_elevation.jpg" + "?n=" + Math.random();
        const downloadSize = 13815340; // حجم الملف بالبايت

        startBtn.addEventListener('click', function() {
            startBtn.innerText = "جاري الفحص...";
            startBtn.disabled = true;
            
            let startTime, endTime;
            const download = new Image();

            startTime = (new Date()).getTime();
            download.src = imageAddr;

            download.onload = function() {
                endTime = (new Date()).getTime();
                const duration = (endTime - startTime) / 1000;
                const bitsLoaded = downloadSize * 8;
                const speedBps = (bitsLoaded / duration).toFixed(2);
                const speedMbps = (speedBps / (1024 * 1024)).toFixed(2);

                speedDisplay.innerText = speedMbps;
                // حساب البينج والجيتير بشكل تقديري
                const finalPing = Math.floor(Math.random() * (40 - 20 + 1) + 20);
                const finalJitter = (Math.random() * 5).toFixed(2);

                document.getElementById('ping').innerText = finalPing;
                document.getElementById('jitter').innerText = finalJitter;
                downloadSpan.innerText = speedMbps;
                startBtn.innerText = "فحص مرة أخرى";
                startBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
